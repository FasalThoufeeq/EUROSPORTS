<body
  class="vertical-layout vertical-menu 2-columns menu-expanded fixed-navbar"
  data-open="click"
  data-menu="vertical-menu"
  data-color="bg-chartbg"
  data-col="2-columns"
>
  <section class="app-content content">
    <div class="container d-flex justify-content-center">
      <div class="row w-75 mt-5">
        <div class="col-md-12">
          <h2 class="text-center">Add Category</h2>
          <form id="form" action="/admin/add-category" method="post">
            <label for="">Category Name</label>
            <input
              type="text"
              id="name"
              name="categoryname"
              class="form-control"
              required=""
              onkeyup="validateName()"
            />
            <span id="name-error" class="validation-label"></span>
            <br />
            <button type="submit" class="btn btn-info mt-4">Submit</button>
          </form>
        </div>
      </div>
    </div>
  </section>
  <!-- Table section -->
  <% if(category.length==0){%>
  <div class="d-flex justify-content-center">
    <img
      src="data:image/png;base64,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"
      alt=""
    />

    <!-- <h3>No Orders Available</h3> -->
  </div>
  <%} else{%>
  <section w-50 mx-auto>
    <div class="card-body">
      <div class="row w-50 mt-5 mx-auto">
        <div class="table-responsive">
          <div class="table-responsive">
            <table class="table align-middle table-nowrap mb-0">
              <thead class="table-light">
                <tr>
                  <th class="align-middle" scope="col">No</th>
                  <th class="align-middle" scope="col">Category Name</th>
                  <th class="align-middle" scope="col">Option</th>
                </tr>
              </thead>
              <tbody>
                <% category.forEach(function(category,index) { %>
                <tr>
                  <td><%= index+1 %></td>
                  <td><%= category.categoryname%></td>

                  <td>
                    <a
                      href="/admin/edit-category/<%= category._id %>"
                      class="btn btn-xs btn-dark"
                    >
                      Edit</a
                    >
                    <a
                      href="/admin/delete-category/<%= category._id %>"
                      class="btn btn-xs btn-dark"
                      onclick="return confirm('Are you sure, do you want to delete category called <%= category.categoryname %> ?')"
                    >
                      Delete</a
                    >
                  </td>
                </tr>
                <% }) %>
              </tbody>
            </table>
          </div>
        </div>
        <!-- table-responsive end// -->
      </div>
    </div>
  </section>
  <%} %>
</body>

<script>
  let nameError = document.getElementById("name-error");

  const regex = /^[^ ].*/;
  function validateName() {
    var name = document.getElementById("name").value;
    var nameInput = document.getElementById("name");

    if (name.length == 0) {
      nameError.innerHTML = "Name is required";
      nameError.style.color = "red";
      nameInput.style.border = "solid 2px red";
      return false;
    }
    if (!name.match(regex)) {
      nameError.innerHTML = "Write valid name";
      nameError.style.color = "red";
      nameInput.style.border = "solid 2px red";

      return false;
    }
    nameError.innerHTML = "";
    // nameError.innerHTML = "Valid Name";
    nameError.style.color = "green";
    nameInput.style.border = "solid 2px green";

    return true;
  }

  const form = document.getElementById("form");

  form.addEventListener("submit", (event) => {
    event.preventDefault();
    if (!validateName()) {
      Swal.fire({
        icon: "error",
        title: "Enter details correctly!!",
      });
      return false;
    } else {
      form.submit();
    }
  });
</script>
